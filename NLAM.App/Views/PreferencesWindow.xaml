<Window x:Class="NLAM.App.Views.PreferencesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Preferences" Height="500" Width="600"
        WindowStartupLocation="CenterOwner"
        Background="#252526" Foreground="White"
        ResizeMode="CanResize" MinWidth="500" MinHeight="400">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0" Margin="10" Background="#1E1E1E" BorderBrush="#3F3F46">
            <!-- Ollama Connection Tab -->
            <TabItem Header="AI / Ollama" Background="#2D2D30" Foreground="White">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <TextBlock Text="Ollama Connection" FontWeight="Bold" FontSize="14" Margin="0,0,0,15"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="Ollama URL:" VerticalAlignment="Center" Width="100"/>
                            <TextBox x:Name="OllamaUrlTextBox" Text="http://localhost:11434" Width="250" 
                                     Background="#1E1E1E" Foreground="White" BorderBrush="#3F3F46" Padding="5"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="Status:" VerticalAlignment="Center" Width="100"/>
                            <TextBlock x:Name="ConnectionStatusText" Text="Not connected" Foreground="#888888"/>
                        </StackPanel>

                        <Button x:Name="TestConnectionButton" Content="Test Connection" Width="150" HorizontalAlignment="Left" Margin="100,0,0,20" Padding="10,5" Click="TestConnection_Click"/>

                        <TextBlock Text="Available Models:" Margin="0,10,0,5"/>
                        <ListBox x:Name="ModelsListBox" Height="120" Background="#1E1E1E" BorderBrush="#3F3F46" Foreground="White"/>

                        <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                            <TextBlock Text="Default Model:" VerticalAlignment="Center" Width="100"/>
                            <ComboBox x:Name="DefaultModelComboBox" Width="250" Background="#2D2D30" Foreground="White" BorderBrush="#3F3F46"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Shortcuts Tab -->
            <TabItem Header="Shortcuts" Background="#2D2D30" Foreground="White">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <TextBlock Text="Keyboard Shortcuts" FontWeight="Bold" FontSize="14" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Headers -->
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Action" FontWeight="Bold" Margin="0,0,0,10"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Text="Shortcut" FontWeight="Bold" Margin="0,0,0,10"/>

                            <!-- Shortcuts List -->
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="New Timeline" Margin="0,5"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Text="Ctrl+N" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Open" Margin="0,5"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Text="Ctrl+O" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Save" Margin="0,5"/>
                            <TextBlock Grid.Row="3" Grid.Column="1" Text="Ctrl+S" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Auto Import AHK" Margin="0,5"/>
                            <TextBlock Grid.Row="4" Grid.Column="1" Text="Ctrl+I" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="5" Grid.Column="0" Text="Copy Clip" Margin="0,5"/>
                            <TextBlock Grid.Row="5" Grid.Column="1" Text="Ctrl+C" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="6" Grid.Column="0" Text="Paste Clip" Margin="0,5"/>
                            <TextBlock Grid.Row="6" Grid.Column="1" Text="Ctrl+V" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="7" Grid.Column="0" Text="Duplicate Clip" Margin="0,5"/>
                            <TextBlock Grid.Row="7" Grid.Column="1" Text="Alt+Drag" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="8" Grid.Column="0" Text="Delete Selected" Margin="0,5"/>
                            <TextBlock Grid.Row="8" Grid.Column="1" Text="Delete" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="9" Grid.Column="0" Text="Zoom In/Out" Margin="0,5"/>
                            <TextBlock Grid.Row="9" Grid.Column="1" Text="Ctrl+Wheel" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="10" Grid.Column="0" Text="Run Script" Margin="0,5"/>
                            <TextBlock Grid.Row="10" Grid.Column="1" Text="F5 (or Play button)" Foreground="#4FC3F7" Margin="0,5"/>

                            <TextBlock Grid.Row="11" Grid.Column="0" Text="Refresh Script" Margin="0,5"/>
                            <TextBlock Grid.Row="11" Grid.Column="1" Text="F5" Foreground="#4FC3F7" Margin="0,5"/>
                        </Grid>

                        <TextBlock Text="Mouse Actions" FontWeight="Bold" FontSize="14" Margin="0,25,0,10"/>
                        <TextBlock Text="• Drag clip: Move clip within track" Foreground="#CCCCCC" Margin="0,3"/>
                        <TextBlock Text="• Drag clip to another track: Move between tracks" Foreground="#CCCCCC" Margin="0,3"/>
                        <TextBlock Text="• Alt+Drag: Duplicate clip" Foreground="#CCCCCC" Margin="0,3"/>
                        <TextBlock Text="• Right-click clip: Context menu" Foreground="#CCCCCC" Margin="0,3"/>
                        <TextBlock Text="• Drag right edge: Resize clip" Foreground="#CCCCCC" Margin="0,3"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Theme Tab -->
            <TabItem Header="Theme" Background="#2D2D30" Foreground="White">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <TextBlock Text="Theme Colors" FontWeight="Bold" FontSize="14" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Window Background:" Margin="0,5"/>
                            <Border x:Name="WindowBgPreview" Grid.Row="0" Grid.Column="1" Width="60" Height="25" Background="#1E1E1E" BorderBrush="White" BorderThickness="1" Margin="0,5"/>
                            <TextBox x:Name="WindowBgTextBox" Grid.Row="0" Grid.Column="2" Text="#1E1E1E" Width="100" HorizontalAlignment="Left" Background="#1E1E1E" Foreground="White" BorderBrush="#3F3F46" Margin="10,5" Padding="5,2" TextChanged="ThemeColor_TextChanged"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Panel Background:" Margin="0,5"/>
                            <Border x:Name="PanelBgPreview" Grid.Row="1" Grid.Column="1" Width="60" Height="25" Background="#252526" BorderBrush="White" BorderThickness="1" Margin="0,5"/>
                            <TextBox x:Name="PanelBgTextBox" Grid.Row="1" Grid.Column="2" Text="#252526" Width="100" HorizontalAlignment="Left" Background="#1E1E1E" Foreground="White" BorderBrush="#3F3F46" Margin="10,5" Padding="5,2" TextChanged="ThemeColor_TextChanged"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Border Color:" Margin="0,5"/>
                            <Border x:Name="BorderPreview" Grid.Row="2" Grid.Column="1" Width="60" Height="25" Background="#3F3F46" BorderBrush="White" BorderThickness="1" Margin="0,5"/>
                            <TextBox x:Name="BorderTextBox" Grid.Row="2" Grid.Column="2" Text="#3F3F46" Width="100" HorizontalAlignment="Left" Background="#1E1E1E" Foreground="White" BorderBrush="#3F3F46" Margin="10,5" Padding="5,2" TextChanged="ThemeColor_TextChanged"/>

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Accent Color:" Margin="0,5"/>
                            <Border x:Name="AccentPreview" Grid.Row="3" Grid.Column="1" Width="60" Height="25" Background="#007ACC" BorderBrush="White" BorderThickness="1" Margin="0,5"/>
                            <TextBox x:Name="AccentTextBox" Grid.Row="3" Grid.Column="2" Text="#007ACC" Width="100" HorizontalAlignment="Left" Background="#1E1E1E" Foreground="White" BorderBrush="#3F3F46" Margin="10,5" Padding="5,2" TextChanged="ThemeColor_TextChanged"/>

                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Selection Outline:" Margin="0,5"/>
                            <Border x:Name="SelectionPreview" Grid.Row="4" Grid.Column="1" Width="60" Height="25" Background="#FFFFFF" BorderBrush="White" BorderThickness="1" Margin="0,5"/>
                            <TextBox x:Name="SelectionTextBox" Grid.Row="4" Grid.Column="2" Text="#FFFFFF" Width="100" HorizontalAlignment="Left" Background="#1E1E1E" Foreground="White" BorderBrush="#3F3F46" Margin="10,5" Padding="5,2" TextChanged="ThemeColor_TextChanged"/>
                        </Grid>

                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                            <Button Content="Reset to Default" Click="ResetTheme_Click" Padding="10,5" Margin="0,0,10,0"/>
                            <Button Content="Apply Theme" Click="ApplyTheme_Click" Padding="10,5" Background="#007ACC" Foreground="White" BorderThickness="0"/>
                        </StackPanel>

                        <TextBlock Text="Note: Theme changes require app restart to take full effect." 
                                   Foreground="#888888" FontStyle="Italic" Margin="0,15,0,0"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Bottom Buttons -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
            <Button Content="OK" Width="80" Height="28" Margin="0,0,10,0" Click="OK_Click" Background="#007ACC" Foreground="White" BorderThickness="0"/>
            <Button Content="Cancel" Width="80" Height="28" Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>
